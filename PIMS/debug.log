Watching for file changes with StatReloader
Viewing cart: cart={'5': 2}, total=151.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-53f246b09f, total=151.00, cart={'5': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/MHHnrshrEiqQ3GW2c0WWXhVBeZ96rhaeoviBBbG2srnDy'}}
Added to cart: product_id=3, quantity=1, cart={'5': 2, '3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 2, '3': 1}, total=271.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 2, '3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-495ad9e725, total=271.00, cart={'5': 2, '3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/5zQeSVOs3YhYbMu5URvLEQLxJRu44XPuk9O0HEVyY0xu7'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351040099004067413735_1746897480652'], 'trx_ref': ['PHARM-495ad9e725'], 'status': ['success'], '_': ['1746897480653']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-495ad9e725, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351040099004067413735_1746897480652'], 'trx_ref': ['PHARM-495ad9e725'], 'status': ['success'], '_': ['1746897480653']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-495ad9e725, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
Rendering payment success page
Added to cart: product_id=3, quantity=1, cart={'5': 2, '3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 2, '3': 2}, total=391.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=5, cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-5b04b89f0e, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/lkwW3wA85UjKV8ZW4KAWhCIPCZcZViVe5ZlqZgpGzss7L'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35109030070856795214_1746897556558'], 'trx_ref': ['PHARM-5b04b89f0e'], 'status': ['success'], '_': ['1746897556559']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-5b04b89f0e, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35109030070856795214_1746897556558'], 'trx_ref': ['PHARM-5b04b89f0e'], 'status': ['success'], '_': ['1746897556559']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-5b04b89f0e, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
Added to cart: product_id=3, quantity=1, cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-996bcc84ef, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/lCH4sHXfwfubCEMvCHnNGVNn7SvL1BcWICPBXvKCDm849'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351023226929220516512_1746897726299'], 'trx_ref': ['PHARM-996bcc84ef'], 'status': ['success'], '_': ['1746897726300']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-996bcc84ef, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351023226929220516512_1746897726299'], 'trx_ref': ['PHARM-996bcc84ef'], 'status': ['success'], '_': ['1746897726300']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-996bcc84ef, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
Added to cart: product_id=3, quantity=2, cart={'3': 4}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 4}, total=480.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 4}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-196489fd2c, total=480.00, cart={'3': 4}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/VMfHrQv2VmVXdm96kyequFBjdZUoAwtiPDuM4BwEGv7Nv'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108945146967673093_1746902041967'], 'trx_ref': ['PHARM-196489fd2c'], 'status': ['success'], '_': ['1746902041968']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-196489fd2c, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108945146967673093_1746902041967'], 'trx_ref': ['PHARM-196489fd2c'], 'status': ['success'], '_': ['1746902041968']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-196489fd2c, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
Added to cart: product_id=3, quantity=1, cart={'3': 5}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 5}, total=600.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 5}, total=600.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 5}, total=600.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-339d46f492, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/F8JvcIkENq427ISMEBxMV5ouFM79xktYmWB9xmnci4PQL'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106686709850292121_1746902735360'], 'trx_ref': ['PHARM-339d46f492'], 'status': ['success'], '_': ['1746902735361']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-339d46f492, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106686709850292121_1746902735360'], 'trx_ref': ['PHARM-339d46f492'], 'status': ['success'], '_': ['1746902735361']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-339d46f492, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-71106b4dce, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/dZ4f6jGkhgx858Mz3ZLsEJl0RNcvXw9rShJ1VmaoW3hcj'}}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351022477645234076138_1746902840088'], 'trx_ref': ['PHARM-71106b4dce'], 'status': ['success'], '_': ['1746902840089']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-71106b4dce, payment_details={}
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351022477645234076138_1746902840088'], 'trx_ref': ['PHARM-71106b4dce'], 'status': ['success'], '_': ['1746902840089']}>, session_id=None, session_keys=[], session_data={}
No cart found for tx_ref=PHARM-71106b4dce, payment_details={}
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\PIMS\settings.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=5, quantity=1, cart={'3': 1, '5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1, '5': 1}, total=195.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 1}, total=75.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-6293a38dba, total=75.50, cart={'5': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=1
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/TFGNevfA0QuwoS6QXeSpwZ9CIf4HXxz9cl2QwosIHo4yf'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107317772360611441_1746903433215'], 'trx_ref': ['PHARM-6293a38dba'], 'status': ['success'], '_': ['1746903433216']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-6293a38dba
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107317772360611441_1746903433215'], 'trx_ref': ['PHARM-6293a38dba'], 'status': ['success'], '_': ['1746903433216']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-6293a38dba
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-6293a38dba HTTP/1.1" 200 508
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 75.5, 'charge': 1.89, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APCY3tOjIUi6i', 'tx_ref': 'PHARM-6293a38dba', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T18:57:14.000000Z', 'updated_at': '2025-05-10T18:57:14.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-6293a38dba
Processing sale: product=Ibuprofen 200mg, quantity=1, current_quantity=200, reserved=7
Unexpected error in payment callback: tx_ref=PHARM-6293a38dba, error=database is locked
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-6293a38dba HTTP/1.1" 200 508
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 75.5, 'charge': 1.89, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APCY3tOjIUi6i', 'tx_ref': 'PHARM-6293a38dba', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T18:57:14.000000Z', 'updated_at': '2025-05-10T18:57:14.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-6293a38dba
Processing sale: product=Ibuprofen 200mg, quantity=1, current_quantity=200, reserved=6
Unexpected error in payment callback: tx_ref=PHARM-6293a38dba, error=database is locked
Internal Server Error: /admin/inventory/inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Inventory has no field named 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 319, in results
    yield ResultList(form, items_for_result(cl, res, form))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 130, in total_sales_quantity
    total = obj.inventory_sales.aggregate(Sum('quantity'))['quantity__sum'] or 0
            ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Inventory' object has no attribute 'inventory_sales'
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /admin/inventory/inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Inventory has no field named 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 319, in results
    yield ResultList(form, items_for_result(cl, res, form))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 130, in total_sales_quantity
    total = obj.inventory_sales.aggregate(Sum('quantity'))['quantity__sum'] or 0
            ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Inventory' object has no attribute 'inventory_sales'
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /admin/inventory/inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Inventory has no field named 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 319, in results
    yield ResultList(form, items_for_result(cl, res, form))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 130, in total_sales_quantity
    total = obj.inventory_sales.aggregate(Sum('quantity'))['quantity__sum'] or 0
            ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Inventory' object has no attribute 'inventory_sales'
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /admin/inventory/inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Inventory has no field named 'total_sales_quantity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 91, in total_sales_quantity
    total = obj.sales.aggregate(Sum('quantity'))['quantity__sum'] or 0
            ^^^^^^^^^
AttributeError: 'Inventory' object has no attribute 'sales'. Did you mean: 'save'?
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=5, quantity=1, cart={'5': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 2}, total=151.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-692fc6d35e, total=151.00, cart={'5': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=2
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/QJvjSiwBjVFn6sfbqGRfZHB3ijdJVc4UwsYLr2wSRMBHf'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103908835321515516_1746905916917'], 'trx_ref': ['PHARM-692fc6d35e'], 'status': ['success'], '_': ['1746905916918']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-692fc6d35e
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103908835321515516_1746905916917'], 'trx_ref': ['PHARM-692fc6d35e'], 'status': ['success'], '_': ['1746905916918']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-692fc6d35e
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-692fc6d35e HTTP/1.1" 200 507
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 151, 'charge': 3.78, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APZ5IFm7UNlj4', 'tx_ref': 'PHARM-692fc6d35e', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:38:38.000000Z', 'updated_at': '2025-05-10T19:38:38.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-692fc6d35e
Processing sale: product=Ibuprofen 200mg, quantity=2, current_quantity=200, reserved=7
Sale recorded: product=Ibuprofen 200mg, quantity=2, tx_ref=PHARM-692fc6d35e, new_quantity=198, new_reserved=5
Payment completed: tx_ref=PHARM-692fc6d35e, cart cleared, sales recorded
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-692fc6d35e HTTP/1.1" 200 507
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 151, 'charge': 3.78, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APZ5IFm7UNlj4', 'tx_ref': 'PHARM-692fc6d35e', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:38:38.000000Z', 'updated_at': '2025-05-10T19:38:38.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-692fc6d35e
Processing sale: product=Ibuprofen 200mg, quantity=2, current_quantity=198, reserved=5
Database error creating sale for Ibuprofen 200mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-692fc6d35e, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Added to cart: product_id=5, quantity=1, cart={'5': 3}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 3}, total=226.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 3}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-1c1641e709, total=226.50, cart={'5': 3}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=3
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/rfiSc2to0VDYo4jLFzLI923wECALOa7AYDr9SBsdDj5bu'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510234081982786689_1746906072701'], 'trx_ref': ['PHARM-1c1641e709'], 'status': ['success'], '_': ['1746906072702']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-1c1641e709
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510234081982786689_1746906072701'], 'trx_ref': ['PHARM-1c1641e709'], 'status': ['success'], '_': ['1746906072702']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-1c1641e709
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-1c1641e709 HTTP/1.1" 200 509
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 226.5, 'charge': 5.66, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APACgqk7romo9', 'tx_ref': 'PHARM-1c1641e709', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:41:13.000000Z', 'updated_at': '2025-05-10T19:41:13.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-1c1641e709
Processing sale: product=Ibuprofen 200mg, quantity=3, current_quantity=198, reserved=6
Unexpected error in payment callback: tx_ref=PHARM-1c1641e709, error=database is locked
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-1c1641e709 HTTP/1.1" 200 509
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 226.5, 'charge': 5.66, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APACgqk7romo9', 'tx_ref': 'PHARM-1c1641e709', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:41:13.000000Z', 'updated_at': '2025-05-10T19:41:13.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-1c1641e709
Processing sale: product=Ibuprofen 200mg, quantity=3, current_quantity=198, reserved=3
Sale recorded: product=Ibuprofen 200mg, quantity=3, tx_ref=PHARM-1c1641e709, new_quantity=195, new_reserved=0
Payment completed: tx_ref=PHARM-1c1641e709, cart cleared, sales recorded
Added to cart: product_id=5, quantity=1, cart={'5': 4}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 4}, total=302.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 4}, total=302.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=5, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=5, quantity=1, cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 1}, total=75.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=5, quantity=2, cart={'5': 3}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 3}, total=226.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=2, cart={'5': 3, '3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 3, '3': 2}, total=466.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=5, cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-0fe0c58b8f, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=4
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/F3UEq7CjifSXtl196XuphPSSE6wCgLbfFW38CPQMfpJQp'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107374406866686427_1746906891991'], 'trx_ref': ['PHARM-0fe0c58b8f'], 'status': ['success'], '_': ['1746906891992']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-0fe0c58b8f
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107374406866686427_1746906891991'], 'trx_ref': ['PHARM-0fe0c58b8f'], 'status': ['success'], '_': ['1746906891992']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-0fe0c58b8f
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-0fe0c58b8f HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APuFtNkVoKmSr', 'tx_ref': 'PHARM-0fe0c58b8f', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:54:53.000000Z', 'updated_at': '2025-05-10T19:54:53.000000Z'}}
Rendering payment success page
Payment successful, processing sales for tx_ref=PHARM-0fe0c58b8f
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=152, reserved=152
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-0fe0c58b8f, new_quantity=150, new_reserved=150
Payment completed: tx_ref=PHARM-0fe0c58b8f, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-0fe0c58b8f HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APuFtNkVoKmSr', 'tx_ref': 'PHARM-0fe0c58b8f', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:54:53.000000Z', 'updated_at': '2025-05-10T19:54:53.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-0fe0c58b8f
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=150, reserved=150
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-0fe0c58b8f, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-eb3d8f79b1, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=5
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/lh1mFxC9rI2uK75Nb8K1EddJMrai5CKI8F5vW7XWonGkJ'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102447547305015797_1746906913694'], 'trx_ref': ['PHARM-eb3d8f79b1'], 'status': ['success'], '_': ['1746906913695']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-eb3d8f79b1
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102447547305015797_1746906913694'], 'trx_ref': ['PHARM-eb3d8f79b1'], 'status': ['success'], '_': ['1746906913695']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-eb3d8f79b1
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-eb3d8f79b1 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APZHLQ2kMcAE2', 'tx_ref': 'PHARM-eb3d8f79b1', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:55:14.000000Z', 'updated_at': '2025-05-10T19:55:14.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-eb3d8f79b1
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=150, reserved=150
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-eb3d8f79b1, new_quantity=148, new_reserved=148
Payment completed: tx_ref=PHARM-eb3d8f79b1, cart cleared, sales recorded
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-eb3d8f79b1 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APZHLQ2kMcAE2', 'tx_ref': 'PHARM-eb3d8f79b1', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:55:14.000000Z', 'updated_at': '2025-05-10T19:55:14.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-eb3d8f79b1
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=148, reserved=148
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-eb3d8f79b1, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-febb9b5d53, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=6
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/vhChOvlWLNNpNRWz0gmVQ87sMBPMpJh9TldA4SKj9sPDq'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104502146313053843_1746907017475'], 'trx_ref': ['PHARM-febb9b5d53'], 'status': ['success'], '_': ['1746907017476']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-febb9b5d53
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104502146313053843_1746907017475'], 'trx_ref': ['PHARM-febb9b5d53'], 'status': ['success'], '_': ['1746907017476']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-febb9b5d53
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-febb9b5d53 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'AP4jDhgFeeMCF', 'tx_ref': 'PHARM-febb9b5d53', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:56:58.000000Z', 'updated_at': '2025-05-10T19:56:58.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-febb9b5d53
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=148, reserved=148
Rendering payment success page
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-febb9b5d53, new_quantity=146, new_reserved=146
Payment completed: tx_ref=PHARM-febb9b5d53, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-febb9b5d53 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'AP4jDhgFeeMCF', 'tx_ref': 'PHARM-febb9b5d53', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:56:58.000000Z', 'updated_at': '2025-05-10T19:56:58.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-febb9b5d53
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=146, reserved=146
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-febb9b5d53, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-de9f081f40, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=7
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/t4j569XxTiIHxpjUqOB5PZXbQPyhKZKxTX0mqjlhAIWxU'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106682272065469068_1746907071100'], 'trx_ref': ['PHARM-de9f081f40'], 'status': ['success'], '_': ['1746907071101']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-de9f081f40
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106682272065469068_1746907071100'], 'trx_ref': ['PHARM-de9f081f40'], 'status': ['success'], '_': ['1746907071101']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-de9f081f40
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-de9f081f40 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APShktY72mLZd', 'tx_ref': 'PHARM-de9f081f40', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:57:52.000000Z', 'updated_at': '2025-05-10T19:57:52.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-de9f081f40
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=146, reserved=146
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-de9f081f40, new_quantity=144, new_reserved=144
Payment completed: tx_ref=PHARM-de9f081f40, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-de9f081f40 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APShktY72mLZd', 'tx_ref': 'PHARM-de9f081f40', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:57:52.000000Z', 'updated_at': '2025-05-10T19:57:52.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-de9f081f40
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=144, reserved=144
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-de9f081f40, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-14c62e3656, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=8
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/uqHau52Izyoz5IuMCLXjsn0hMCcAVFEnakbPWkO68P3oZ'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106408510376019125_1746907188553'], 'trx_ref': ['PHARM-14c62e3656'], 'status': ['success'], '_': ['1746907188554']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-14c62e3656
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106408510376019125_1746907188553'], 'trx_ref': ['PHARM-14c62e3656'], 'status': ['success'], '_': ['1746907188554']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-14c62e3656
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-14c62e3656 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APzZTZobFXbGF', 'tx_ref': 'PHARM-14c62e3656', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:59:49.000000Z', 'updated_at': '2025-05-10T19:59:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-14c62e3656
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=144, reserved=144
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-14c62e3656, new_quantity=142, new_reserved=142
Payment completed: tx_ref=PHARM-14c62e3656, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-14c62e3656 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APzZTZobFXbGF', 'tx_ref': 'PHARM-14c62e3656', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T19:59:49.000000Z', 'updated_at': '2025-05-10T19:59:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-14c62e3656
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=142, reserved=142
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-14c62e3656, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Rendering payment success page
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=2, cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-dc230240b0, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=9
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/sgxbjJS8JwvoAaD3xTNh9Afr0JOA8ROCYLKEr1r6K884Z'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351012862469672558996_1746907461520'], 'trx_ref': ['PHARM-dc230240b0'], 'status': ['success'], '_': ['1746907461521']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-dc230240b0
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351012862469672558996_1746907461520'], 'trx_ref': ['PHARM-dc230240b0'], 'status': ['success'], '_': ['1746907461521']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-dc230240b0
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-dc230240b0 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APdmyP3T0zXEe', 'tx_ref': 'PHARM-dc230240b0', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:04:22.000000Z', 'updated_at': '2025-05-10T20:04:22.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-dc230240b0
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=142, reserved=142
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-dc230240b0, new_quantity=140, new_reserved=140
Payment completed: tx_ref=PHARM-dc230240b0, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-dc230240b0 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APdmyP3T0zXEe', 'tx_ref': 'PHARM-dc230240b0', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:04:22.000000Z', 'updated_at': '2025-05-10T20:04:22.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-dc230240b0
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=140, reserved=140
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-dc230240b0, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={'3': 2}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 2}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-b082ab2eb7, total=240.00, cart={'3': 2}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=10
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/ya1XY9J01faqBsTYOWu7JB3XXgIziH32MY1VbtGQmVsXL'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351034911185325320737_1746907530413'], 'trx_ref': ['PHARM-b082ab2eb7'], 'status': ['success'], '_': ['1746907530414']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-b082ab2eb7
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351034911185325320737_1746907530413'], 'trx_ref': ['PHARM-b082ab2eb7'], 'status': ['success'], '_': ['1746907530414']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-b082ab2eb7
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b082ab2eb7 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APg14gWXwC2U5', 'tx_ref': 'PHARM-b082ab2eb7', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:05:31.000000Z', 'updated_at': '2025-05-10T20:05:31.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-b082ab2eb7
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=140, reserved=140
Sale recorded: product=Vitamin C 1000mg, quantity=2, tx_ref=PHARM-b082ab2eb7, new_quantity=138, new_reserved=138
Payment completed: tx_ref=PHARM-b082ab2eb7, cart cleared, sales recorded
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b082ab2eb7 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 240, 'charge': 6, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APg14gWXwC2U5', 'tx_ref': 'PHARM-b082ab2eb7', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:05:31.000000Z', 'updated_at': '2025-05-10T20:05:31.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-b082ab2eb7
Processing sale: product=Vitamin C 1000mg, quantity=2, current_quantity=138, reserved=138
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-b082ab2eb7, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Added to cart: product_id=3, quantity=1, cart={'3': 3}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 3}, total=360.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-d2cde91e49, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=11
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/FxK6S7Elz3EKeiswp96s884gMPLE6WqebuTG7NXzxtNNu'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107336827314810245_1746907740274'], 'trx_ref': ['PHARM-d2cde91e49'], 'status': ['success'], '_': ['1746907740275']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-d2cde91e49
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107336827314810245_1746907740274'], 'trx_ref': ['PHARM-d2cde91e49'], 'status': ['success'], '_': ['1746907740275']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-d2cde91e49
Starting new HTTPS connection (1): api.chapa.co:443
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-d2cde91e49 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APl5DtRErjDbv', 'tx_ref': 'PHARM-d2cde91e49', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:09:01.000000Z', 'updated_at': '2025-05-10T20:09:01.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-d2cde91e49
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=138, reserved=137
Unexpected error in payment callback: tx_ref=PHARM-d2cde91e49, error=database is locked
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-d2cde91e49 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APl5DtRErjDbv', 'tx_ref': 'PHARM-d2cde91e49', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:09:01.000000Z', 'updated_at': '2025-05-10T20:09:01.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-d2cde91e49
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=138, reserved=136
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-d2cde91e49, new_quantity=137, new_reserved=135
Payment completed: tx_ref=PHARM-d2cde91e49, cart cleared, sales recorded
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/update/3/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 71, in reverse
    extra, resolver = resolver.namespace_dict[ns]
                      ~~~~~~~~~~~~~~~~~~~~~~~^^^^
KeyError: 'customer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 321, in update_cart
    return redirect('customer:view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 82, in reverse
    raise NoReverseMatch("%s is not a registered namespace" % key)
django.urls.exceptions.NoReverseMatch: 'customer' is not a registered namespace
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/update/3/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 71, in reverse
    extra, resolver = resolver.namespace_dict[ns]
                      ~~~~~~~~~~~~~~~~~~~~~~~^^^^
KeyError: 'customer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 321, in update_cart
    return redirect('customer:view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 82, in reverse
    raise NoReverseMatch("%s is not a registered namespace" % key)
django.urls.exceptions.NoReverseMatch: 'customer' is not a registered namespace
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=6, quantity=1, cart={'6': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/add/6/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 71, in reverse
    extra, resolver = resolver.namespace_dict[ns]
                      ~~~~~~~~~~~~~~~~~~~~~~~^^^^
KeyError: 'customer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 290, in add_to_cart
    return redirect('customer:items_list')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 82, in reverse
    raise NoReverseMatch("%s is not a registered namespace" % key)
django.urls.exceptions.NoReverseMatch: 'customer' is not a registered namespace
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\urls.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=6, quantity=1, cart={'6': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\urls.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 273, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 273, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 273, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 273, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'view_cart' not found. 'view_cart' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'customer_logout' not found. 'customer_logout' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'home' not found. 'home' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'home' not found. 'home' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'home' not found. 'home' is not a valid view function or pattern name.
Internal Server Error: /customer/products/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 258, in items_list
    return render(request, 'product_list.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 243, in render
    nodelist.append(node.render_annotated(context))
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'add_to_cart' not found. 'add_to_cart' is not a valid view function or pattern name.
Added to cart: product_id=3, quantity=1, cart={'6': 1, '3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'6': 1, '3': 1}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 306, in view_cart
    return render(request, 'cart.html', {
        'cart_items': cart_items,
        'grand_total': total
    })
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 243, in render
    nodelist.append(node.render_annotated(context))
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'update_cart' not found. 'update_cart' is not a valid view function or pattern name.
Viewing cart: cart={'6': 1, '3': 1}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 306, in view_cart
    return render(request, 'cart.html', {
        'cart_items': cart_items,
        'grand_total': total
    })
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 243, in render
    nodelist.append(node.render_annotated(context))
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'update_cart' not found. 'update_cart' is not a valid view function or pattern name.
Viewing cart: cart={'6': 1, '3': 1}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 306, in view_cart
    return render(request, 'cart.html', {
        'cart_items': cart_items,
        'grand_total': total
    })
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'initiate_payment' not found. 'initiate_payment' is not a valid view function or pattern name.
Viewing cart: cart={'6': 1, '3': 1}, total=240.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=6, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Removed from cart: product_id=3, cart={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Internal Server Error: /customer/cart/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 306, in view_cart
    return render(request, 'cart.html', {
        'cart_items': cart_items,
        'grand_total': total
    })
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-f64a86fa45, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=12
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/YKELYECc6CkzGZNuDQH3EbaCBiwPurmAsWF9tBQO3c3ri'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108927118461084963_1746909948367'], 'trx_ref': ['PHARM-f64a86fa45'], 'status': ['success'], '_': ['1746909948368']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-f64a86fa45
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108927118461084963_1746909948367'], 'trx_ref': ['PHARM-f64a86fa45'], 'status': ['success'], '_': ['1746909948368']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-f64a86fa45
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-f64a86fa45 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APBjO8TNvL2EO', 'tx_ref': 'PHARM-f64a86fa45', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:45:50.000000Z', 'updated_at': '2025-05-10T20:45:50.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-f64a86fa45
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=137, reserved=136
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-f64a86fa45, new_quantity=136, new_reserved=135
Cart cleared: cart={}, payment_details={}, session_id=None
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
Internal Server Error: /customer/payment/success/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 570, in payment_success
    return render(request, 'payment_success.html', {
        'message': 'Payment successful! Your cart has been cleared.'
    })
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-f64a86fa45 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APBjO8TNvL2EO', 'tx_ref': 'PHARM-f64a86fa45', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:45:50.000000Z', 'updated_at': '2025-05-10T20:45:50.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-f64a86fa45
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=136, reserved=135
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-f64a86fa45, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=2, quantity=5, cart={'2': 5}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'2': 5}, total=377.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'2': 5}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-9b7ab976e9, total=377.50, cart={'2': 5}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=13
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/GAVIKsRNz2aWK4UYviFEBfV0d5ebPlRoyrPOVmw6LpLQi'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351008422775977458341_1746910008345'], 'trx_ref': ['PHARM-9b7ab976e9'], 'status': ['success'], '_': ['1746910008346']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-9b7ab976e9
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351008422775977458341_1746910008345'], 'trx_ref': ['PHARM-9b7ab976e9'], 'status': ['success'], '_': ['1746910008346']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-9b7ab976e9
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-9b7ab976e9 HTTP/1.1" 200 509
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 377.5, 'charge': 9.44, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APdGqBhBUFHPO', 'tx_ref': 'PHARM-9b7ab976e9', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:46:49.000000Z', 'updated_at': '2025-05-10T20:46:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-9b7ab976e9
Processing sale: product=Ibuprofen 200mg, quantity=5, current_quantity=200, reserved=197
Sale recorded: product=Ibuprofen 200mg, quantity=5, tx_ref=PHARM-9b7ab976e9, new_quantity=195, new_reserved=192
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-9b7ab976e9 HTTP/1.1" 200 509
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 377.5, 'charge': 9.44, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APdGqBhBUFHPO', 'tx_ref': 'PHARM-9b7ab976e9', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:46:49.000000Z', 'updated_at': '2025-05-10T20:46:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-9b7ab976e9
Processing sale: product=Ibuprofen 200mg, quantity=5, current_quantity=195, reserved=192
Database error creating sale for Ibuprofen 200mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-9b7ab976e9, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-c321263726, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=14
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/7dstwRw4TFoYe18bVL49k0qRck6jtUHHRfktnWwP2Hfzn'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510029721768465729603_1746910103127'], 'trx_ref': ['PHARM-c321263726'], 'status': ['success'], '_': ['1746910103128']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-c321263726
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510029721768465729603_1746910103127'], 'trx_ref': ['PHARM-c321263726'], 'status': ['success'], '_': ['1746910103128']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-c321263726
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c321263726 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APOMjx3pTgngW', 'tx_ref': 'PHARM-c321263726', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:48:24.000000Z', 'updated_at': '2025-05-10T20:48:24.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-c321263726
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=136, reserved=135
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-c321263726, new_quantity=135, new_reserved=134
Cart cleared: cart={}, payment_details={}, session_id=None
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c321263726 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APOMjx3pTgngW', 'tx_ref': 'PHARM-c321263726', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:48:24.000000Z', 'updated_at': '2025-05-10T20:48:24.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-c321263726
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=135, reserved=134
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-c321263726, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-b1bab95b69, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=15
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/q7Y8GJnOjJoCHB7zDhNVouQHccde2kRAlTnaNAmkZnamI'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-5c2b8783fd, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=16
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/xaGW9p3kqLDuzimcA6UhT7eEI4awU6HjqFPxwfhJ5QtoH'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104249835137705492_1746910656986'], 'trx_ref': ['PHARM-5c2b8783fd'], 'status': ['success'], '_': ['1746910656987']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-5c2b8783fd
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104249835137705492_1746910656986'], 'trx_ref': ['PHARM-5c2b8783fd'], 'status': ['success'], '_': ['1746910656987']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-5c2b8783fd
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-5c2b8783fd HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APg3jeMjKSWKy', 'tx_ref': 'PHARM-5c2b8783fd', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:57:38.000000Z', 'updated_at': '2025-05-10T20:57:38.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-5c2b8783fd
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=135, reserved=135
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-5c2b8783fd, new_quantity=134, new_reserved=134
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-5c2b8783fd HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APg3jeMjKSWKy', 'tx_ref': 'PHARM-5c2b8783fd', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:57:38.000000Z', 'updated_at': '2025-05-10T20:57:38.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-5c2b8783fd
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=134, reserved=134
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-5c2b8783fd, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-de14772a34, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=17
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/TzuE1dOgkgSJ9AZczekuHofwOuRuqLaxINqwnu0IJodxF'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108855775909099852_1746910697326'], 'trx_ref': ['PHARM-de14772a34'], 'status': ['success'], '_': ['1746910697327']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-de14772a34
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35108855775909099852_1746910697326'], 'trx_ref': ['PHARM-de14772a34'], 'status': ['success'], '_': ['1746910697327']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-de14772a34
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-de14772a34 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APMnU0B34sY3M', 'tx_ref': 'PHARM-de14772a34', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:58:18.000000Z', 'updated_at': '2025-05-10T20:58:18.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-de14772a34
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=134, reserved=134
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-de14772a34, new_quantity=133, new_reserved=133
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-de14772a34 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APMnU0B34sY3M', 'tx_ref': 'PHARM-de14772a34', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T20:58:18.000000Z', 'updated_at': '2025-05-10T20:58:18.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-de14772a34
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=133, reserved=133
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-de14772a34, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Rendering payment success page
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-97bf875011, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=18
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-61b3c63f89, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=19
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-7e119d70af, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=20
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-54b9d52511, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=21
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 412, in initiate_payment
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 432, in initiate_payment
    return redirect('view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'view_cart' not found. 'view_cart' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-c7fa69d74c, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=22
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 412, in initiate_payment
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 432, in initiate_payment
    return redirect('view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'view_cart' not found. 'view_cart' is not a valid view function or pattern name.
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-9890837bdd, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=23
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 412, in initiate_payment
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 432, in initiate_payment
    return redirect('view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'view_cart' not found. 'view_cart' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-4f20cfda1f, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=24
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 412, in initiate_payment
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 432, in initiate_payment
    return redirect('view_cart')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'view_cart' not found. 'view_cart' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-57fa143143, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=25
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Payment details saved: tx_ref=PHARM-2d0c1c728d, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=26
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-dcf1c431de, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=27
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/jMnTkHhg6XaR2QPrA3QkASQnQxnnbxtJF3E7sDfNupUXu'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351004693375311535086_1746911416371'], 'trx_ref': ['PHARM-dcf1c431de'], 'status': ['success'], '_': ['1746911416372']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-dcf1c431de
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351004693375311535086_1746911416371'], 'trx_ref': ['PHARM-dcf1c431de'], 'status': ['success'], '_': ['1746911416372']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-dcf1c431de
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-dcf1c431de HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APodi9u8zuTfT', 'tx_ref': 'PHARM-dcf1c431de', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:10:17.000000Z', 'updated_at': '2025-05-10T21:10:17.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-dcf1c431de
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=133, reserved=133
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-dcf1c431de, new_quantity=132, new_reserved=132
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-dcf1c431de HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APodi9u8zuTfT', 'tx_ref': 'PHARM-dcf1c431de', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:10:17.000000Z', 'updated_at': '2025-05-10T21:10:17.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-dcf1c431de
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=132, reserved=132
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-dcf1c431de, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={}, total=0, session_id=None
Viewing cart: cart={}, total=0, session_id=None
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-0687abf323, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=28
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/8YTpozqeiHaj4XFyd6hL5JLaXO0QJcGheCb3BdPNA5eyz'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35105533116153720038_1746911468824'], 'trx_ref': ['PHARM-0687abf323'], 'status': ['success'], '_': ['1746911468825']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-0687abf323
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35105533116153720038_1746911468824'], 'trx_ref': ['PHARM-0687abf323'], 'status': ['success'], '_': ['1746911468825']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-0687abf323
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-0687abf323 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APOPQ8RyQmeTM', 'tx_ref': 'PHARM-0687abf323', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:11:10.000000Z', 'updated_at': '2025-05-10T21:11:10.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-0687abf323
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=132, reserved=132
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-0687abf323, new_quantity=131, new_reserved=131
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-0687abf323 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APOPQ8RyQmeTM', 'tx_ref': 'PHARM-0687abf323', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:11:10.000000Z', 'updated_at': '2025-05-10T21:11:10.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-0687abf323
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=131, reserved=131
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-0687abf323, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-e2c909a67e, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=29
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/k4InDUD7hL8n2gvluO2XXrxCBXozratfMMwSWDxwbs7wC'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107097964930174521_1746911834812'], 'trx_ref': ['PHARM-e2c909a67e'], 'status': ['success'], '_': ['1746911834813']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-e2c909a67e
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107097964930174521_1746911834812'], 'trx_ref': ['PHARM-e2c909a67e'], 'status': ['success'], '_': ['1746911834813']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-e2c909a67e
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-e2c909a67e HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APT2KaVUXg68M', 'tx_ref': 'PHARM-e2c909a67e', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:17:16.000000Z', 'updated_at': '2025-05-10T21:17:16.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-e2c909a67e
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=131, reserved=131
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-e2c909a67e, new_quantity=130, new_reserved=130
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-e2c909a67e HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APT2KaVUXg68M', 'tx_ref': 'PHARM-e2c909a67e', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:17:16.000000Z', 'updated_at': '2025-05-10T21:17:16.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-e2c909a67e
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=130, reserved=130
Database error creating sale for Vitamin C 1000mg: UNIQUE constraint failed: inventory_sale.transaction_id
Unexpected error in payment callback: tx_ref=PHARM-e2c909a67e, error=An error occurred in the current transaction. You can't execute queries until the end of the 'atomic' block.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 1}, total=120.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-b5ba95bd73, total=120.00, cart={'3': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=30
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/XHuDhaAc4aKYBNlDxzHb7PjinJcsAZZUg8aeiG6nMIxv2'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102482080730633036_1746912048498'], 'trx_ref': ['PHARM-b5ba95bd73'], 'status': ['success'], '_': ['1746912048499']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-b5ba95bd73
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102482080730633036_1746912048498'], 'trx_ref': ['PHARM-b5ba95bd73'], 'status': ['success'], '_': ['1746912048499']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-b5ba95bd73
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b5ba95bd73 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APJa1LQNJbBkr', 'tx_ref': 'PHARM-b5ba95bd73', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:20:49.000000Z', 'updated_at': '2025-05-10T21:20:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-b5ba95bd73
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=130, reserved=130
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-b5ba95bd73, new_quantity=129, new_reserved=129
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b5ba95bd73 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APJa1LQNJbBkr', 'tx_ref': 'PHARM-b5ba95bd73', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:20:49.000000Z', 'updated_at': '2025-05-10T21:20:49.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-b5ba95bd73
Cart cleared: cart={}, payment_details={}, session_id=None
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={}, total=0, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=5, quantity=1, cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'5': 1}, total=75.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Initiate payment failed: Invalid request method
Viewing cart: cart={'5': 1}, total=75.50, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'5': 1}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-381370e622, total=75.50, cart={'5': 1}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=31
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/aeJOaGO9tzavCxC2nI4ZDZpLdBIEYjOaLQ3o7a4jV0ZX7'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106453722141152636_1746912524470'], 'trx_ref': ['PHARM-381370e622'], 'status': ['success'], '_': ['1746912524471']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-381370e622
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35106453722141152636_1746912524470'], 'trx_ref': ['PHARM-381370e622'], 'status': ['success'], '_': ['1746912524471']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-381370e622
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-381370e622 HTTP/1.1" 200 508
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 75.5, 'charge': 1.89, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APSCX5yeIswS3', 'tx_ref': 'PHARM-381370e622', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:28:46.000000Z', 'updated_at': '2025-05-10T21:28:46.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-381370e622
Processing sale: product=Ibuprofen 200mg, quantity=1, current_quantity=195, reserved=1
Sale recorded: product=Ibuprofen 200mg, quantity=1, tx_ref=PHARM-381370e622, new_quantity=194, new_reserved=0
Cart cleared: cart={}, payment_details={}, session_id=None
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-381370e622 HTTP/1.1" 200 508
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 75.5, 'charge': 1.89, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APSCX5yeIswS3', 'tx_ref': 'PHARM-381370e622', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:28:46.000000Z', 'updated_at': '2025-05-10T21:28:46.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-381370e622
Cart cleared: cart={}, payment_details={}, session_id=None
Internal Server Error: /admin/inventory/inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: customer_sale.total_amount

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\options.py", line 718, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\utils\decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\utils\decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\sites.py", line 241, in inner
    return view(request, *args, **kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\utils\decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\utils\decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\utils\decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\options.py", line 2034, in changelist_view
    response = self.response_action(
        request, queryset=cl.get_queryset(request)
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\options.py", line 1666, in response_action
    response = func(self, request, queryset)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\actions.py", line 39, in delete_selected
    ) = modeladmin.get_deleted_objects(queryset, request)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\options.py", line 2176, in get_deleted_objects
    return get_deleted_objects(objs, request, self.admin_site)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 138, in get_deleted_objects
    collector.collect(objs)
    ~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 205, in collect
    return super().collect(objs, source_attr=source_attr, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\deletion.py", line 344, in collect
    if getattr(on_delete, "lazy_sub_objs", False) or sub_objs:
                                                     ^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 414, in __bool__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 91, in __iter__
    results = compiler.execute_sql(
        chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1574, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
django.db.utils.OperationalError: no such column: customer_sale.total_amount
Added to cart: product_id=3, quantity=12, cart={'3': 12}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Viewing cart: cart={'3': 12}, total=1440.00, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Initiate payment: cart={'3': 12}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-43af23df56, total=1440.00, cart={'3': 12}, email=, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=32
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/wn7aISoMGE0QPqO5KmJVOoXHz5lLEq2KQAgaYRbJZMv9a'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351045846318420029_1746913174904'], 'trx_ref': ['PHARM-43af23df56'], 'status': ['success'], '_': ['1746913174905']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-43af23df56
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351045846318420029_1746913174904'], 'trx_ref': ['PHARM-43af23df56'], 'status': ['success'], '_': ['1746913174905']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-43af23df56
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-43af23df56 HTTP/1.1" 200 506
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 1440, 'charge': 36, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APd7FQujzvQir', 'tx_ref': 'PHARM-43af23df56', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:39:36.000000Z', 'updated_at': '2025-05-10T21:39:36.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-43af23df56
Processing sale: product=Vitamin C 1000mg, quantity=12, current_quantity=129, reserved=12
Sale recorded: product=Vitamin C 1000mg, quantity=12, tx_ref=PHARM-43af23df56, new_quantity=117, new_reserved=0
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=u05kprwsrcyqd7f5j9qzwzwv3ctwxr85
Cart cleared: cart={}, payment_details={}, session_id=None
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-43af23df56 HTTP/1.1" 200 506
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 1440, 'charge': 36, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APd7FQujzvQir', 'tx_ref': 'PHARM-43af23df56', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-10T21:39:36.000000Z', 'updated_at': '2025-05-10T21:39:36.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-43af23df56
Cart cleared: cart={}, payment_details={}, session_id=None
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\urls.py changed, reloading.
Watching for file changes with StatReloader
Not Found: /
Not Found: /favicon.ico
Internal Server Error: /customer/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 81, in home
    return render(request, 'home.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'customer_login' not found. 'customer_login' is not a valid view function or pattern name.
Not Found: /
Internal Server Error: /customer/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 81, in home
    return render(request, 'home.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'customer_login' not found. 'customer_login' is not a valid view function or pattern name.
Internal Server Error: /customer/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 81, in home
    return render(request, 'home.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'customer_login' not found. 'customer_login' is not a valid view function or pattern name.
Watching for file changes with StatReloader
Forbidden (CSRF token from POST incorrect.): /customer/customer_login/
Internal Server Error: /customer/customer_login/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 153, in customer_login
    return redirect('items_list')  # Replace with your dashboard URL
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
Viewing cart: cart={}, total=0, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6
Viewing cart: cart={'3': 1}, total=120.00, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6
Initiate payment: cart={'3': 1}, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-8e8fb939a4, total=120.00, cart={'3': 1}, email=, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=33
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/edy3r6babz7COfzdBi8J8Ba8Mo91syXNKIoA6wKS9EP4R'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35100026699591602967754_1746986345797'], 'trx_ref': ['PHARM-8e8fb939a4'], 'status': ['success'], '_': ['1746986345798']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-8e8fb939a4
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35100026699591602967754_1746986345797'], 'trx_ref': ['PHARM-8e8fb939a4'], 'status': ['success'], '_': ['1746986345798']}>, session_id=None, session_keys=[], session_data={}
Verifying transaction: tx_ref=PHARM-8e8fb939a4
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-8e8fb939a4 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APbT1ZkrSZlCj', 'tx_ref': 'PHARM-8e8fb939a4', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-11T17:59:03.000000Z', 'updated_at': '2025-05-11T17:59:03.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-8e8fb939a4
Processing sale: product=Vitamin C 1000mg, quantity=1, current_quantity=117, reserved=1
Sale recorded: product=Vitamin C 1000mg, quantity=1, tx_ref=PHARM-8e8fb939a4, new_quantity=116, new_reserved=0
Cart cleared: cart={}, payment_details={}, session_id=None
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-8e8fb939a4 HTTP/1.1" 200 504
Chapa verify response: status=success, data={'message': 'Payment details fetched successfully', 'status': 'success', 'data': {'first_name': None, 'last_name': None, 'email': None, 'phone_number': None, 'currency': 'ETB', 'amount': 120, 'charge': 3, 'mode': 'test', 'method': 'test', 'type': 'API', 'status': 'success', 'reference': 'APbT1ZkrSZlCj', 'tx_ref': 'PHARM-8e8fb939a4', 'customization': {'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products', 'logo': None}, 'meta': None, 'created_at': '2025-05-11T17:59:03.000000Z', 'updated_at': '2025-05-11T17:59:03.000000Z'}}
Payment successful, processing sales for tx_ref=PHARM-8e8fb939a4
Cart cleared: cart={}, payment_details={}, session_id=None
Viewing cart: cart={}, total=0, session_id=bu03vc3box4ngvxkz2ujj7xhjc4mm3w6
Internal Server Error: /customer/logout/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 589, in customer_logout
    return redirect('customer_login')
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'customer_login' not found. 'customer_login' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Not Found: /accounts/login/
Not Found: /accounts/login/
Not Found: /accounts/login/
Forbidden (CSRF token from POST incorrect.): /customer/customer_login/
Internal Server Error: /customer/customer_login/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 177, in customer_login
    return redirect(next_url)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /customer/customer_login/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 177, in customer_login
    return redirect(next_url)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'items_list' not found. 'items_list' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={}, total=0, session_id=cuokhfcl8wg3mshjxf0pl9x37efp3vh6
Viewing cart: cart={}, total=0, session_id=cuokhfcl8wg3mshjxf0pl9x37efp3vh6
Viewing cart: cart={}, total=0, session_id=cuokhfcl8wg3mshjxf0pl9x37efp3vh6
Viewing cart: cart={}, total=0, session_id=cuokhfcl8wg3mshjxf0pl9x37efp3vh6
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=3aa8fe8mdlg0iojrfxu6gt7qvdr6qriu
Viewing cart: cart={'3': 1}, total=120.00, session_id=3aa8fe8mdlg0iojrfxu6gt7qvdr6qriu
Removed from cart: product_id=3, cart={}, session_id=3aa8fe8mdlg0iojrfxu6gt7qvdr6qriu
Viewing cart: cart={}, total=0, session_id=3aa8fe8mdlg0iojrfxu6gt7qvdr6qriu
Watching for file changes with StatReloader
Not Found: /
Not Found: /favicon.ico
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-0c4487e071, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=34
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-4d2165c339, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=35
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-cf9087a4f0, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=36
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-f508d0b84c, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=37
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-eb564df103, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=38
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, post_data=<QueryDict: {}>
Invalid or missing email: customer@example.com
Payment details saved: tx_ref=PHARM-3a29881385, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=39
Chapa payload: {'amount': 120.0, 'currency': 'ETB', 'email': 'customer@example.com', 'tx_ref': 'PHARM-3a29881385', 'callback_url': 'http://127.0.0.1:8000/customer/payment/callback/', 'return_url': 'http://127.0.0.1:8000/customer/payment/success/', 'first_name': 'Customer', 'last_name': '', 'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products'}
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Chapa initialize response: status_code=400, response={'message': {'email': ['validation.email']}, 'status': 'failed', 'data': None}
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize, response=No response
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada, post_data=<QueryDict: {}>
Invalid or missing email: customer@example.com
Payment details saved: tx_ref=PHARM-444bf16061, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=40
Chapa payload: {'amount': 120.0, 'currency': 'ETB', 'email': 'customer@example.com', 'tx_ref': 'PHARM-444bf16061', 'callback_url': 'http://127.0.0.1:8000/customer/payment/callback/', 'return_url': 'http://127.0.0.1:8000/customer/payment/success/', 'first_name': 'Customer', 'last_name': '', 'title': 'Pharmacy Order', 'description': 'Payment for pharmacy products'}
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Chapa initialize response: status_code=400, response={'message': {'email': ['validation.email']}, 'status': 'failed', 'data': None}
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize, response=No response
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Payment details saved: tx_ref=PHARM-7242b8c167, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=41
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Initiate payment: cart={'3': 1}, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
Viewing cart: cart={'3': 1}, total=120.00, session_id=x5us4tlhxiydhzt6z3tbz0kj7khg3ada
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Forbidden (CSRF token from POST incorrect.): /customer/customer_login/
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=5qbuazo5jnl8bienqn4qiu0k4dlk4j8p
Viewing cart: cart={'3': 1}, total=120.00, session_id=5qbuazo5jnl8bienqn4qiu0k4dlk4j8p
Initiate payment: cart={'3': 1}, session_id=5qbuazo5jnl8bienqn4qiu0k4dlk4j8p
Payment details saved: tx_ref=PHARM-686f3b25f8, total=120.00, cart={'3': 1}, email=customer@example.com, transaction_id=42
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Viewing cart: cart={'3': 1}, total=120.00, session_id=5qbuazo5jnl8bienqn4qiu0k4dlk4j8p
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=ndd0d0e6idhkgqjz007cu8qvhz6vfo8t
Viewing cart: cart={'3': 1}, total=120.00, session_id=ndd0d0e6idhkgqjz007cu8qvhz6vfo8t
Initiate payment: cart={'3': 1}, session_id=ndd0d0e6idhkgqjz007cu8qvhz6vfo8t
Payment details saved: tx_ref=PHARM-4636624591, total=120.00, cart={'3': 1}, email=biniyambizuneh215@gmail.com, transaction_id=43
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/mTnvfLtB3TOfQnhrbOAjpbPMjsW7wmdnGLKJUG6kcznBI'}}
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=ndd0d0e6idhkgqjz007cu8qvhz6vfo8t
Rendering payment success page
Forbidden (CSRF token from POST incorrect.): /customer/cart/add/3/
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Viewing cart: cart={'3': 1}, total=120.00, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Initiate payment: cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Payment details saved: tx_ref=PHARM-980c9190f4, total=120.00, cart={'3': 1}, email=biniyambizuneh215@gmail.com, transaction_id=44
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/EgPmKxy8m62VnLWC78XLhf11SiDJWfLo9DyLSfbRP9t9g'}}
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Viewing cart: cart={'3': 1}, total=120.00, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Initiate payment: cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-371f1e69de, total=120.00, cart={'3': 1}, email=, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=45
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/p0X7pNFCAwAb12hPVieRvVsoJEtjucfhKDzgdwkvimeaT'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Viewing cart: cart={'3': 1}, total=120.00, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Initiate payment: cart={'3': 1}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-7dc4a65185, total=120.00, cart={'3': 1}, email=, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=46
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/6BaC8K8MdvSnMhbaOaCHLOFj3SyHrHGmnCKVKarRXbDQl'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Rendering payment success page
Viewing cart: cart={}, total=0, session_id=4s5bbpbcj63i0mreoiyeg6sbkd091a6y
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=om7v9vjqlig8e677330apgu4nnf840yc
Viewing cart: cart={'3': 1}, total=120.00, session_id=om7v9vjqlig8e677330apgu4nnf840yc
Initiate payment: cart={'3': 1}, session_id=om7v9vjqlig8e677330apgu4nnf840yc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-1aa1cb8846, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=om7v9vjqlig8e677330apgu4nnf840yc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=47
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/35wgjvTedba2RmB8MVW5Ljsk0wtPm4Vs1eUVENPskJ242'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=om7v9vjqlig8e677330apgu4nnf840yc
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\PIMS\settings.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-3ac4a5a9d6, total=120.00, cart={'3': 1}, email=, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=48
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/3NzmMLVODl2MFBrTD3TTXgEVg2suEyYbzrp45pD1VzexY'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Not Found: /accounts/login/
Not Found: /accounts/login/
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-c4d187a1ba, total=120.00, cart={'3': 1}, email=, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=49
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/HI9aOYXJ1aaLJSqLjcPr21ui4BjA9XDvPeFgjA3i6u51F'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351024582590766731538_1747036749820'], 'trx_ref': ['PHARM-c4d187a1ba'], 'status': ['success'], '_': ['1747036749821']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351024582590766731538_1747036749820'], 'trx_ref': ['PHARM-c4d187a1ba'], 'status': ['success'], '_': ['1747036749821']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c4d187a1ba HTTP/1.1" 200 529
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c4d187a1ba HTTP/1.1" 200 529
Chapa verify response: status=success
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
Missing email for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
Missing email for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
Missing email for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
Missing email for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Initiate payment: cart={'3': 1}, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
Missing email for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=cy1f6m8za1cv7w4pj8gk03thccw05098
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Initiate payment: cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart'], user=customer
Payment details saved: tx_ref=PHARM-eac2c062b1, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=50
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Initiate payment: cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=customer
Payment details saved: tx_ref=PHARM-2ae763c1e3, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=51
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=customer
Payment details saved: tx_ref=PHARM-b6366b92a3, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=52
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Initiate payment: cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=customer
Payment details saved: tx_ref=PHARM-c0f73bd78e, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=53
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Initiate payment: cart={'3': 1}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-68207712b3, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=54
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/29ZrMp6I2SZhDa64yZjGEnZQJl1B0t18Dougg9vet8LJp'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351032207242656875645_1747037310295'], 'trx_ref': ['PHARM-68207712b3'], 'status': ['success'], '_': ['1747037310296']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351032207242656875645_1747037310295'], 'trx_ref': ['PHARM-68207712b3'], 'status': ['success'], '_': ['1747037310296']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-68207712b3 HTTP/1.1" 200 529
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=jj829blrleor7h9lqnwbjogfmkr4wrf5
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-68207712b3 HTTP/1.1" 200 529
Chapa verify response: status=success
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-203bb9a293, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=55
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/a9twg6PolCKQbCq8bxrBMr6xY7ddYI4EjuLvUm3XUg6el'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104381950943958255_1747037366796'], 'trx_ref': ['PHARM-203bb9a293'], 'status': ['success'], '_': ['1747037366797']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35104381950943958255_1747037366796'], 'trx_ref': ['PHARM-203bb9a293'], 'status': ['success'], '_': ['1747037366797']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-203bb9a293 HTTP/1.1" 200 529
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-203bb9a293 HTTP/1.1" 200 529
Chapa verify response: status=success
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-3b792c977d, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=56
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/tZVvrTetQY6JkOolgmvB2kb0nAHnnEtmt5Fv3YzmevTwz'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510047740737733279914_1747037469332'], 'trx_ref': ['PHARM-3b792c977d'], 'status': ['success'], '_': ['1747037469333']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510047740737733279914_1747037469332'], 'trx_ref': ['PHARM-3b792c977d'], 'status': ['success'], '_': ['1747037469333']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-3b792c977d HTTP/1.1" 200 529
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-3b792c977d HTTP/1.1" 200 529
Chapa verify response: status=success
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\backends\sqlite3\base.py", line 354, in execute
    return super().execute(query, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: UNIQUE constraint failed: inventory_sale.transaction_id
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-ffe9be697d, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=57
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/TsmefqnQkrdacRvcnuY30rCG94dSJ3FLO6KdpGajDqaqP'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510926618866581736_1747038071529'], 'trx_ref': ['PHARM-ffe9be697d'], 'status': ['success'], '_': ['1747038071530']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510926618866581736_1747038071529'], 'trx_ref': ['PHARM-ffe9be697d'], 'status': ['success'], '_': ['1747038071530']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-ffe9be697d HTTP/1.1" 200 529
Chapa verify response: status=success
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-ffe9be697d HTTP/1.1" 200 529
Chapa verify response: status=success
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-ffe9be697d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1835, in execute_sql
    for sql, params in self.as_sql():
                       ~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1760, in as_sql
    self.prepare_value(field, self.pre_save_val(field, obj))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1699, in prepare_value
    return field.get_db_prep_save(value, connection=self.connection)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related.py", line 1142, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 1008, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2815, in get_db_prep_value
    value = self.get_prep_value(value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-ffe9be697d'.
Internal Server Error: /customer/payment/callback/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-ffe9be697d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 479, in payment_callback
    Sale.objects.create(
    ~~~~~~~~~~~~~~~~~~~^
        product=product,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        status='completed'
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1835, in execute_sql
    for sql, params in self.as_sql():
                       ~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1760, in as_sql
    self.prepare_value(field, self.pre_save_val(field, obj))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\compiler.py", line 1699, in prepare_value
    return field.get_db_prep_save(value, connection=self.connection)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related.py", line 1142, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 1008, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2815, in get_db_prep_value
    value = self.get_prep_value(value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-ffe9be697d'.
Internal Server Error: /admin/inventory/sale/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Sale has no field named 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 239, in __get__
    rel_obj = self.field.get_cached_value(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\mixins.py", line 37, in get_cached_value
    return instance._state.fields_cache[self.cache_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'transaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-3b792c977d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 183, in transaction_tx_ref
    return obj.transaction.tx_ref
           ^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 257, in __get__
    rel_obj = self.get_object(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 220, in get_object
    return qs.get(self.field.get_reverse_related_filter(instance))
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 369, in get_prep_lookup
    return super().get_prep_lookup()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-3b792c977d'.
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\models.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-88b6eed149, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=58
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/N7BpAnpTviQBzDmeuf3p8rMAhUP9WwtbKdSsWIUAOBLPz'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103739449058982034_1747038446969'], 'trx_ref': ['PHARM-88b6eed149'], 'status': ['success'], '_': ['1747038446970']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103739449058982034_1747038446969'], 'trx_ref': ['PHARM-88b6eed149'], 'status': ['success'], '_': ['1747038446970']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-88b6eed149 HTTP/1.1" 200 529
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-88b6eed149 HTTP/1.1" 200 529
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
Internal Server Error: /admin/inventory/sale/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Sale has no field named 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 239, in __get__
    rel_obj = self.field.get_cached_value(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\mixins.py", line 37, in get_cached_value
    return instance._state.fields_cache[self.cache_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'transaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-3b792c977d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 183, in transaction_tx_ref
    return obj.transaction.tx_ref
           ^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 257, in __get__
    rel_obj = self.get_object(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 220, in get_object
    return qs.get(self.field.get_reverse_related_filter(instance))
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 369, in get_prep_lookup
    return super().get_prep_lookup()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-3b792c977d'.
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /admin/inventory/sale/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Sale has no field named 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 239, in __get__
    rel_obj = self.field.get_cached_value(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\mixins.py", line 37, in get_cached_value
    return instance._state.fields_cache[self.cache_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'transaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-3b792c977d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 183, in transaction_tx_ref
    return obj.transaction.tx_ref
           ^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 257, in __get__
    rel_obj = self.get_object(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 220, in get_object
    return qs.get(self.field.get_reverse_related_filter(instance))
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 369, in get_prep_lookup
    return super().get_prep_lookup()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-3b792c977d'.
Watching for file changes with StatReloader
Internal Server Error: /admin/inventory/sale/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Sale has no field named 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 239, in __get__
    rel_obj = self.field.get_cached_value(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\mixins.py", line 37, in get_cached_value
    return instance._state.fields_cache[self.cache_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'transaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-3b792c977d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 183, in transaction_tx_ref
    return obj.transaction.tx_ref
           ^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 257, in __get__
    rel_obj = self.get_object(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 220, in get_object
    return qs.get(self.field.get_reverse_related_filter(instance))
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 369, in get_prep_lookup
    return super().get_prep_lookup()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-3b792c977d'.
Internal Server Error: /admin/inventory/sale/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 676, in get_field
    return self.fields_map[field_name]
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 290, in lookup_field
    f = _get_non_gfk_field(opts, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 330, in _get_non_gfk_field
    field = opts.get_field(name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\options.py", line 678, in get_field
    raise FieldDoesNotExist(
        "%s has no field named '%s'" % (self.object_name, field_name)
    )
django.core.exceptions.FieldDoesNotExist: Sale has no field named 'transaction_tx_ref'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 239, in __get__
    rel_obj = self.field.get_cached_value(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\mixins.py", line 37, in get_cached_value
    return instance._state.fields_cache[self.cache_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'transaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: 'PHARM-3b792c977d'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 92, in rendered_content
    return template.render(context, self._request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 65, in render
    result = block.nodelist.render(context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\base.py", line 45, in render
    return super().render(context)
           ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\library.py", line 258, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 346, in result_list
    "results": list(results(cl)),
               ~~~~^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 322, in results
    yield ResultList(None, items_for_result(cl, res, None))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 313, in __init__
    super().__init__(*items)
    ~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\templatetags\admin_list.py", line 218, in items_for_result
    f, attr, value = lookup_field(field_name, result, cl.model_admin)
                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\admin\utils.py", line 299, in lookup_field
    value = attr(obj)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\admin.py", line 183, in transaction_tx_ref
    return obj.transaction.tx_ref
           ^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 257, in __get__
    rel_obj = self.get_object(instance)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\related_descriptors.py", line 220, in get_object
    return qs.get(self.field.get_reverse_related_filter(instance))
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 369, in get_prep_lookup
    return super().get_prep_lookup()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
ValueError: Field 'id' expected a number but got 'PHARM-3b792c977d'.
Using proactor: IocpProactor
Using proactor: IocpProactor
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-a49ff67154, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=59
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/P9iAr2qu8tZ2H1lVZqP24Dm6p9sXrS3gevmMdxVY6nM3t'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103506601339902635_1747039138374'], 'trx_ref': ['PHARM-a49ff67154'], 'status': ['success'], '_': ['1747039138375']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103506601339902635_1747039138374'], 'trx_ref': ['PHARM-a49ff67154'], 'status': ['success'], '_': ['1747039138375']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-a49ff67154 HTTP/1.1" 200 529
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-a49ff67154 HTTP/1.1" 200 529
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-067ae8f721, total=120.00, cart={'3': 1}, email=, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=1
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/SDdyJTeR9QLmaXEm3VaOebSu8rZ2ohnamq7Mpji8S54Fi'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103930641635497494_1747039300165'], 'trx_ref': ['PHARM-067ae8f721'], 'status': ['success'], '_': ['1747039300166']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35103930641635497494_1747039300165'], 'trx_ref': ['PHARM-067ae8f721'], 'status': ['success'], '_': ['1747039300166']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-067ae8f721 HTTP/1.1" 200 504
Chapa verify response: status=success
Residual cart cleared in payment_success: cart={}, payment_details={}
Sale recorded: product=Vitamin C 1000mg, quantity=1
Rendering payment success page
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-067ae8f721 HTTP/1.1" 200 504
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\forms.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\forms.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\forms.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\forms.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\forms.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\forms.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
No email found for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Initiate payment: cart={'3': 1}, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], user=admin
No email found for user: admin
Viewing cart: cart={'3': 1}, total=120.00, session_id=gg8b9ominoofcbnk7ozar82qgwbz93on
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=d024nuiq9hjtymnxvvfq5wkdzsr5i0nd
Viewing cart: cart={'3': 1}, total=120.00, session_id=d024nuiq9hjtymnxvvfq5wkdzsr5i0nd
Initiate payment: cart={'3': 1}, session_id=d024nuiq9hjtymnxvvfq5wkdzsr5i0nd, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart'], user=customer
Payment details saved: tx_ref=PHARM-e3d8e4265e, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=d024nuiq9hjtymnxvvfq5wkdzsr5i0nd, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=2
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=d024nuiq9hjtymnxvvfq5wkdzsr5i0nd
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash']
Initiate payment failed: Empty cart
Viewing cart: cart={}, total=0, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc
Viewing cart: cart={'3': 1}, total=120.00, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc
Initiate payment: cart={'3': 1}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-ec97d9fa3f, total=120.00, cart={'3': 1}, email=, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=3
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/pI5guM9On6hbwh0Fg7TWr7gzs9aZ7hJeUYnp0zYSGqs9b'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102611349253346572_1747046563632'], 'trx_ref': ['PHARM-ec97d9fa3f'], 'status': ['success'], '_': ['1747046563633']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35102611349253346572_1747046563632'], 'trx_ref': ['PHARM-ec97d9fa3f'], 'status': ['success'], '_': ['1747046563633']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-ec97d9fa3f HTTP/1.1" 200 504
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-ec97d9fa3f HTTP/1.1" 200 504
Residual cart cleared in payment_success: cart={}, payment_details={}
Chapa verify response: status=success
Rendering payment success page
Cart cleared: cart={}, payment_details={}
Rendering payment success page
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc
Viewing cart: cart={'3': 1}, total=120.00, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc
Initiate payment: cart={'3': 1}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 362, in initiate_payment
    email = request.POST.get('customer_email', request.User.email if request.user.is_authenticated else 'customer@example.com')
                                               ^^^^^^^^^^^^
AttributeError: 'WSGIRequest' object has no attribute 'User'. Did you mean: 'user'?
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-c2762e8f4e, total=120.00, cart={'3': 1}, email=, session_id=qprpxzeql57hotmbvcubw0htoai0gxyc, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=4
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/gQsnCmixnIfyNsOtXB8qkrI6Al8Pc1cmw3AfmK5kelXGo'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510952288652184392_1747046738634'], 'trx_ref': ['PHARM-c2762e8f4e'], 'status': ['success'], '_': ['1747046738635']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery3510952288652184392_1747046738634'], 'trx_ref': ['PHARM-c2762e8f4e'], 'status': ['success'], '_': ['1747046738635']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c2762e8f4e HTTP/1.1" 200 504
Chapa verify response: status=success
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-c2762e8f4e HTTP/1.1" 200 504
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
Cart cleared: cart={}, payment_details={}
Rendering payment success page
Rendering payment success page
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /customer/verify/9e3c1c04-fee7-40ba-bff2-1735c20a09e0/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 111, in verify_customer
    return redirect('complete_registration', token=token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 49, in redirect
    return redirect_class(resolve_url(to, *args, **kwargs))
                          ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 180, in resolve_url
    return reverse(to, args=args, kwargs=kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'complete_registration' not found. 'complete_registration' is not a valid view function or pattern name.
Not Found: /favicon.ico
Watching for file changes with StatReloader
Not Found: /
Not Found: /favicon.ico
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-75d0f81476, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=5
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-5d077ccbba, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=6
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-b6c72ddf17, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=7
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-d56ef40d3e, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=8
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-f8d3013784, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=9
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-16b8e62988, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=10
Starting new HTTPS connection (1): api.chapa.co:443
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-de61493950, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=11
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-df5dc4e661, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=12
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-ba743ee985, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=13
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-2e4681cba8, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=14
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-5a66f983da, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=15
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
C:\Users\pavilion\Documents\Industrialproject\PIMS\PIMS\settings.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-2280a01ed4, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=16
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Initiate payment: cart={'3': 1}, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-02b6d9cedf, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=17
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={'3': 1}, total=120.00, session_id=6dsjzm7kf2egu5p6fnlqwu5fl2akke5d
Viewing cart: cart={}, total=0, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-fb7375274a, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=18
Internal Server Error: /customer/payment/initiate/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\contrib\auth\decorators.py", line 60, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py", line 405, in initiate_payment
    json=chapa_payload,
         ^^^^^^^^^^^^^
NameError: name 'chapa_payload' is not defined
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-9f2c3e8940, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=19
Starting new HTTPS connection (1): api.chapa.co:443
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-0b1a042ef8, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=20
Starting new HTTPS connection (1): api.chapa.co:443
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-5dc3b51c80, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=21
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-dded427586, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=22
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-59ea00348c, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=23
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
C:\Users\pavilion\Documents\Industrialproject\PIMS\PIMS\settings.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Initiate payment: cart={'3': 1}, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-3fafed3dbe, total=120.00, cart={'3': 1}, email=bini@example.com, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=24
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 400 72
Payment initiation failed: 400 Client Error: Bad Request for url: https://api.chapa.co/v1/transaction/initialize
Viewing cart: cart={'3': 1}, total=120.00, session_id=1vuy913vur7wo6xnm4ajso5gupk4ef15
C:\Users\pavilion\Documents\Industrialproject\PIMS\customer\views.py changed, reloading.
Watching for file changes with StatReloader
Viewing cart: cart={}, total=0, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={}, total=0, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={'3': 1}, total=120.00, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Initiate payment: cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart']
Payment details saved: tx_ref=PHARM-cba72b8f53, total=120.00, cart={'3': 1}, email=, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=25
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/87S4FNuD63bKlhiVzbodCrwceyr8rSehmyXUtPnI1BzT8'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351027091418804565437_1747684797773'], 'trx_ref': ['PHARM-cba72b8f53'], 'status': ['success'], '_': ['1747684797774']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery351027091418804565437_1747684797773'], 'trx_ref': ['PHARM-cba72b8f53'], 'status': ['success'], '_': ['1747684797774']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-cba72b8f53 HTTP/1.1" 200 504
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-cba72b8f53 HTTP/1.1" 200 504
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Added to cart: product_id=3, quantity=1, cart={'3': 2}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={'3': 2}, total=240.00, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Removed from cart: product_id=3, cart={}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={}, total=0, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={'3': 1}, total=120.00, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Initiate payment: cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-b739f18da1, total=120.00, cart={'3': 1}, email=, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=26
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/6PREl2QjoCT6F4wnnILu1EEe1JqHqmeeIt28dDJBYBD0l'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35109810897042525614_1747685104933'], 'trx_ref': ['PHARM-b739f18da1'], 'status': ['success'], '_': ['1747685104934']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35109810897042525614_1747685104933'], 'trx_ref': ['PHARM-b739f18da1'], 'status': ['success'], '_': ['1747685104934']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b739f18da1 HTTP/1.1" 200 504
Chapa verify response: status=success
Sale recorded: product=Vitamin C 1000mg, quantity=1
Cart cleared: cart={}, payment_details={}
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-b739f18da1 HTTP/1.1" 200 504
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
Added to cart: product_id=3, quantity=1, cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Viewing cart: cart={'3': 1}, total=120.00, session_id=3ln2evjeepu946tif6ly4n6mecg53os6
Initiate payment: cart={'3': 1}, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details']
Payment details saved: tx_ref=PHARM-8e71de5a68, total=120.00, cart={'3': 1}, email=, session_id=3ln2evjeepu946tif6ly4n6mecg53os6, session_keys=['_auth_user_id', '_auth_user_backend', '_auth_user_hash', 'cart', 'payment_details'], transaction_id=27
Starting new HTTPS connection (1): api.chapa.co:443
https://api.chapa.co:443 "POST /v1/transaction/initialize HTTP/1.1" 200 164
Chapa initialize response: {'message': 'Hosted Link', 'status': 'success', 'data': {'checkout_url': 'https://checkout.chapa.co/checkout/payment/LG9uU5qCgnOTA4UxVOasg0mr90IChFYjRIBeokMCZIJCc'}}, callback_url=http://127.0.0.1:8000/customer/payment/callback/
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107977184839378658_1747685204509'], 'trx_ref': ['PHARM-8e71de5a68'], 'status': ['success'], '_': ['1747685204510']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Payment callback triggered: query_params=<QueryDict: {'callback': ['jQuery35107977184839378658_1747685204509'], 'trx_ref': ['PHARM-8e71de5a68'], 'status': ['success'], '_': ['1747685204510']}>, session_id=None
Starting new HTTPS connection (1): api.chapa.co:443
Residual cart cleared in payment_success: cart={}, payment_details={}
Rendering payment success page
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-8e71de5a68 HTTP/1.1" 200 504
Chapa verify response: status=success
https://api.chapa.co:443 "GET /v1/transaction/verify/PHARM-8e71de5a68 HTTP/1.1" 200 504
Sale recorded: product=Vitamin C 1000mg, quantity=1
Chapa verify response: status=success
Cart cleared: cart={}, payment_details={}
Cart cleared: cart={}, payment_details={}
Not Found: /
Watching for file changes with StatReloader
Internal Server Error: /inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\views.py", line 46, in index
    return render(request, 'index.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 62, in render_to_string
    return template.render(context, request)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 107, in render
    return self.template.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 171, in render
    return self._render(context)
           ~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 159, in render
    return compiled_parent._render(context)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 163, in _render
    return self.nodelist.render(context)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 327, in render
    return nodelist.render(context)
           ~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 1008, in render
    return SafeString("".join([node.render_annotated(context) for node in self]))
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 969, in render_annotated
    return self.render(context)
           ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 480, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\urls\resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'expired_products' not found. 'expired_products' is not a valid view function or pattern name.
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\urls.py changed, reloading.
Watching for file changes with StatReloader
Rendering payment success page
Internal Server Error: /inventory/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 510, in parse
    compile_func = self.tags[command]
                   ~~~~~~~~~^^^^^^^^^
KeyError: 'endblock'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\views.py", line 46, in index
    return render(request, 'index.html', context)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\shortcuts.py", line 25, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 61, in render_to_string
    template = get_template(template_name, using=using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 15, in get_template
    return engine.get_template(template_name)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 79, in get_template
    return Template(self.engine.get_template(template_name), self)
                    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 177, in get_template
    template, origin = self.find_template(template_name)
                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 159, in find_template
    template = loader.get_template(name, skip=skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\cached.py", line 57, in get_template
    template = super().get_template(template_name, skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\base.py", line 28, in get_template
    return Template(
        contents,
    ...<2 lines>...
        self.engine,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 154, in __init__
    self.nodelist = self.compile_nodelist()
                    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 196, in compile_nodelist
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 295, in do_extends
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 234, in do_block
    nodelist = parser.parse(("endblock",))
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 962, in do_if
    nodelist = parser.parse(("elif", "else", "endif"))
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 512, in parse
    self.invalid_block_tag(token, command, parse_until)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 563, in invalid_block_tag
    raise self.error(
    ...<8 lines>...
    )
django.template.exceptions.TemplateSyntaxError: Invalid block tag on line 269: 'endblock', expected 'elif', 'else' or 'endif'. Did you forget to register or load this tag?
Internal Server Error: /inventory/inventory/near-expiry/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1035, in find_library
    return parser.libraries[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'humanize'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 90, in rendered_content
    template = self.resolve_template(self.template_name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 72, in resolve_template
    return select_template(template, using=self.using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 42, in select_template
    return engine.get_template(template_name)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 79, in get_template
    return Template(self.engine.get_template(template_name), self)
                    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 177, in get_template
    template, origin = self.find_template(template_name)
                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 159, in find_template
    template = loader.get_template(name, skip=skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\cached.py", line 57, in get_template
    template = super().get_template(template_name, skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\base.py", line 28, in get_template
    return Template(
        contents,
    ...<2 lines>...
        self.engine,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 154, in __init__
    self.nodelist = self.compile_nodelist()
                    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 196, in compile_nodelist
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 295, in do_extends
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1097, in load
    lib = find_library(parser, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1037, in find_library
    raise TemplateSyntaxError(
    ...<5 lines>...
    )
django.template.exceptions.TemplateSyntaxError: 'humanize' is not a registered tag library. Must be one of:
admin_list
admin_modify
admin_urls
cache
i18n
l10n
log
static
tz
widget_tweaks
Internal Server Error: /inventory/inventory/near-expiry/
Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1035, in find_library
    return parser.libraries[name]
           ~~~~~~~~~~~~~~~~^^^^^^
KeyError: 'humanize'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 90, in rendered_content
    template = self.resolve_template(self.template_name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\response.py", line 72, in resolve_template
    return select_template(template, using=self.using)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader.py", line 42, in select_template
    return engine.get_template(template_name)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\backends\django.py", line 79, in get_template
    return Template(self.engine.get_template(template_name), self)
                    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 177, in get_template
    template, origin = self.find_template(template_name)
                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\engine.py", line 159, in find_template
    template = loader.get_template(name, skip=skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\cached.py", line 57, in get_template
    template = super().get_template(template_name, skip)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loaders\base.py", line 28, in get_template
    return Template(
        contents,
    ...<2 lines>...
        self.engine,
    )
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 154, in __init__
    self.nodelist = self.compile_nodelist()
                    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 196, in compile_nodelist
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\loader_tags.py", line 295, in do_extends
    nodelist = parser.parse()
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 518, in parse
    raise self.error(token, e)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\base.py", line 516, in parse
    compiled_result = compile_func(self, token)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1097, in load
    lib = find_library(parser, name)
  File "C:\Users\pavilion\AppData\Local\Programs\Python\Python313\Lib\site-packages\django\template\defaulttags.py", line 1037, in find_library
    raise TemplateSyntaxError(
    ...<5 lines>...
    )
django.template.exceptions.TemplateSyntaxError: 'humanize' is not a registered tag library. Must be one of:
admin_list
admin_modify
admin_urls
cache
i18n
l10n
log
static
tz
widget_tweaks
C:\Users\pavilion\Documents\Industrialproject\PIMS\inventory\forms.py changed, reloading.
